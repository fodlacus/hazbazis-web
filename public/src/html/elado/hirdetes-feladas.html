<!DOCTYPE html>
<html lang="hu">

<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Hirdet√©sfelad√°s - Hazbazis.hu</title>
      <script src="https://cdn.tailwindcss.com"></script>
      <style>
            .hatter-zold {
                  background-color: #3D4A16;
            }

            .bevitel {
                  background-color: rgba(255, 255, 255, 0.05);
                  border: 1px solid rgba(226, 241, 176, 0.2);
                  color: white;
            }

            .gomb-vilagos {
                  background-color: #E2F1B0;
                  color: #3D4A16;
            }
      </style>
</head>

<body class="hatter-zold text-white font-sans">

      <nav class="bg-black/40 backdrop-blur-md fixed w-full z-50 border-b border-white/10">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                  <div class="flex items-center justify-between h-20">

                        <div class="flex-shrink-0">
                              <a href="../../../index.html" class="text-2xl font-bold text-white">
                                    Hazbazis<span class="text-lime-400">.hu</span>
                              </a>
                        </div>

                        <div class="hidden md:block">
                              <div class="ml-10 flex items-baseline space-x-6">
                                    <a href="../../../index.html"
                                          class="text-white hover:text-lime-400 transition-colors text-sm font-medium">F≈ëoldal</a>
                                    <a href="../vevo/terkep.html"
                                          class="text-white hover:text-lime-400 transition-colors text-sm font-medium">T√©rk√©p</a>

                                    <div class="flex items-center space-x-6 ml-4">
                                          <button onclick="window.kilepes()"
                                                class="text-white/50 hover:text-red-400 transition-colors text-xs font-medium uppercase tracking-wider">
                                                Kil√©p√©s
                                          </button>
                                    </div>
                              </div>
                        </div>

                        <div class="-mr-2 flex md:hidden">
                              <button id="mobil-menu-gomb" type="button"
                                    class="inline-flex items-center justify-center p-2 rounded-md text-white hover:text-lime-400 focus:outline-none">
                                    <span class="sr-only">Men√º</span>
                                    <svg class="h-8 w-8" xmlns="http://www.w3.org/2000/svg" fill="none"
                                          viewBox="0 0 24 24" stroke="currentColor">
                                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M4 6h16M4 12h16M4 18h16" />
                                    </svg>
                              </button>
                        </div>
                  </div>
            </div>

            <div id="mobil-menu" class="hidden md:hidden bg-black/95 border-b border-white/10">
                  <div class="px-4 pt-4 pb-6 space-y-4">
                        <a href="../../../index.html"
                              class="block text-gray-300 hover:text-lime-400 text-lg font-medium border-b border-white/5 pb-2">F≈ëoldal</a>
                        <a href="../vevo/terkep.html"
                              class="block text-gray-300 hover:text-lime-400 text-lg font-medium border-b border-white/5 pb-2">T√©rk√©p</a>

                        <button onclick="window.kilepes()"
                              class="w-full text-left text-red-400 hover:text-red-300 block text-base font-medium pt-4">
                              Kijelentkez√©s
                        </button>
                  </div>
            </div>
      </nav>

      <div class="max-w-4xl mx-auto space-y-10 pt-28 px-6 pb-20">

            <div class="flex justify-between items-center mb-6">
                  <h1 id="fejlec-email" class="text-xl md:text-3xl font-bold text-[#E2F1B0] break-all">
                        Bet√∂lt√©s...
                  </h1>

                  <a href="../../../index.html"
                        class="bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg transition-all flex items-center gap-2 text-sm">
                        <span>‚Üê</span> Vissza
                  </a>
            </div>

            <div class="bg-black/20 p-8 rounded-3xl border border-white/10 shadow-2xl">
                  <h2 id="urlap-cim" class="text-3xl font-bold mb-6 text-center">Ingatlan <span
                              style="color: #E2F1B0;">r√∂gz√≠t√©se</span></h2>

                  <div class="bg-white/5 p-4 rounded-2xl border border-white/10 mb-6 relative">
                        <label class="text-[10px] uppercase tracking-widest opacity-50 mb-2 block text-white">
                              Gyors kit√∂lt√©s seg√≠t√©se (kor√°bbi hirdet√©sek alapj√°n)
                        </label>

                        <div class="flex gap-2">
                              <input type="text" id="ai-azonosito"
                                    onkeydown="if(event.key === 'Enter') { event.preventDefault(); window.gyorsKitoltesInditasa(this.value); }"
                                    placeholder="Zugl√≥, 2 szoba, 90 milli√≥ alatt..."
                                    class="bevitel flex-1 px-4 py-2 rounded-xl">

                              <button type="button"
                                    onclick="window.gyorsKitoltesInditasa(document.getElementById('ai-azonosito').value)"
                                    class="bg-lime-400 text-black px-4 md:px-6 py-3 rounded-xl font-bold hover:bg-lime-500 transition-colors">
                                    Elemz√©s
                              </button>

                              <button type="button" onclick="window.urlapUrites()"
                                    class="bg-white/10 text-white px-4 py-3 rounded-xl hover:bg-red-500/20 transition-colors"
                                    title="≈∞rlap √ºr√≠t√©se">
                                    üóëÔ∏è
                              </button>
                        </div>
                        <div id="kereso-talalatok"
                              class="absolute left-0 right-0 mt-1 bg-[#1a1a1a] border border-white/10 rounded-xl shadow-2xl z-50 hidden max-h-60 overflow-y-auto">
                        </div>
                  </div>

                  <form id="hirdetes-urlap">
                        <div id="dinamikus-urlap-kontener" class="space-y-4"></div>
                        <button type="submit" id="hirdetes-bekuldes" disabled
                              class="w-full mt-10 bg-lime-400 text-black font-bold py-4 rounded-full hover:scale-105 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed">
                              Hirdet√©s v√©gleges√≠t√©se
                        </button>
                  </form>
            </div>

            <div class="bg-black/10 p-8 rounded-3xl border border-white/5">
                  <h3 class="text-xl font-bold mb-6 flex items-center gap-2">
                        <span class="w-2 h-2 bg-lime-400 rounded-full animate-pulse"></span>
                        Eddigi hirdet√©seim
                  </h3>
                  <div id="sajat-lista" class="grid grid-cols-1 gap-4">
                        <p class="text-xs opacity-40 italic">Hirdet√©sek bet√∂lt√©se...</p>
                  </div>
            </div>
      </div>

      <script type="module" src="../../js/elado/ai-bridge.js"></script>
      <script type="module" src="../../js/elado/gyors-kitoltes.js"></script>

      <script type="module">
            import { urlapGeneralas } from "../../js/elado/form-generator.js";
            import { helyszinFigyelo } from "../../js/elado/feladas.js";
            import { hirdeteseimListazasa } from "../../js/elado/lista.js";
            import { adatokBetolteseSzerkeszteshez } from "../../js/elado/szerkesztes.js";

            // Auth importok az e-mail c√≠m ki√≠r√°shoz √©s kil√©p√©shez
            import { auth } from "../../util/firebase-config.js";
            import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

            // 1. KIL√âP√âS FUNKCI√ì
            window.kilepes = async function () {
                  try {
                        await signOut(auth);
                        window.location.href = "../../../index.html";
                  } catch (error) {
                        console.error("Hiba kil√©p√©skor:", error);
                  }
            }

            // 2. AUTH FIGYEL≈ê (E-mail c√≠m ki√≠r√°sa fel√ºlre)
            onAuthStateChanged(auth, (user) => {
                  const emailMezo = document.getElementById('fejlec-email');

                  if (user) {
                        // Ha be van l√©pve, ki√≠rjuk az e-mailt
                        if (emailMezo) emailMezo.innerText = user.email;

                        // √âs bet√∂ltj√ºk a list√°t
                        hirdeteseimListazasa();
                  } else {
                        // Ha nincs bel√©pve, visszak√ºldj√ºk a bel√©p√©shez (Biztons√°g)
                        console.warn("Nincs bel√©pve, visszair√°ny√≠t√°s...");
                        window.location.href = "../auth/belepes.html";
                  }
            });

            // 3. INICIALIZ√ÅL√ÅS
            document.addEventListener('DOMContentLoaded', () => {
                  urlapGeneralas("dinamikus-urlap-kontener");
                  helyszinFigyelo();
                  adatokBetolteseSzerkeszteshez();

                  // Mobil men√º logika
                  const gomb = document.getElementById('mobil-menu-gomb');
                  const menu = document.getElementById('mobil-menu');
                  if (gomb && menu) {
                        gomb.addEventListener('click', (e) => {
                              e.stopPropagation();
                              menu.classList.toggle('hidden');
                        });
                        document.addEventListener('click', (e) => {
                              if (!menu.contains(e.target) && !gomb.contains(e.target)) {
                                    menu.classList.add('hidden');
                              }
                        });
                  }
            });
      </script>

</body>

</html>